DELIMITER //
CREATE PROCEDURE AddOrUpdateJobRoles (
	IN JobRoleId INT,
	IN JobRole VARCHAR(100),
	IN IsDeleted BIT
)
BEGIN
	IF (IsDeleted = 1) THEN
		BEGIN
			DELETE FROM jobssearchstrings WHERE jobsearchid = JobRoleId;
		END;
	ELSE
		BEGIN
			IF (SELECT count(*) FROM jobssearchstrings WHERE jobsearchid = JobRoleId) > 0 THEN
				BEGIN
					UPDATE jobssearchstrings jss SET jss.JobRole = JobRole  WHERE jss.jobsearchid = JobRoleId;
				END;
			ELSE 
				BEGIN
					INSERT INTO jobssearchstrings (jobsearchid, JobRole)
						VALUES (JobRoleId, JobRole);
				END;
			END IF;
        END;
	END IF;
	SELECT 1;
END //
DELIMITER ;